# 8.2 Разделы диска

---
## Конспект

### Команды актуальные 

| Команда                      | Результат / Описание                                                    | Пояснение и пример использования                                                                                                                      |
|------------------------------|------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|
| `lsblk`                      | Просмотр информации о блочных устройствах и их разделах                | Показывает список дисков, разделов, точек монтирования и размеров, например: `lsblk -f` для файловых систем и меток                                |
| `ls -l /dev | grep block`   | Просмотр файлов блочных устройств в каталоге /dev                      | Позволяет увидеть блочные устройства с их правами и типами файлов                                                                                      |
| `fdisk -l`                   | Просмотр таблицы разделов всех дисков                                 | Показывает разделы, типы, размеры и данные о MBR и GPT разделах, требует права root                                                                  |
| `parted /dev/sdX print`      | Просмотр схемы разбиения диска (MBR/GPT)                              | Интерактивно показывает схему и таблицу разделов для выбранного диска, например: `parted /dev/sda print`                                              |
| `mount`                      | Просмотр точек монтирования всех файловых систем                        | Отображает текущие монтированные разделы, их точки и опции                                                                                             |
| `mount /dev/sdXN /mnt`       | Монтирование раздела в каталог                                         | Пример монтирования раздела sdXN (например, sda1): `mount /dev/sda1 /mnt`                                                                             |
| `umount /mnt`                | Отмонтировать файловую систему                                         | Отмонтирует ранее примонтированный раздел из каталога /mnt                                                                                             |
| `blkid`                      | Просмотр UUID и типа файловых систем блочных устройств                | Выдаёт уникальные идентификаторы разделов и их тип: `blkid /dev/sda1`                                                                                 |
| `gdisk /dev/sdX`             | Утилита для работы с GPT-разделами диска                              | Позволяет создавать, изменять GPT-разделы, заменитель fdisk для GPT, например: `gdisk /dev/sda`                                                        |
| `cat /proc/partitions`       | Просмотр списка разделов и их размеров                                | Информация о разделах с указанием major/minor номеров и размеров                                                                                       |
| `df -h`                      | Просмотр использования дискового пространства по монтированным разделам | Удобно увидеть размер, использованный и свободный объем на смонтированных разделах                                                                    |
| `ls -l /dev/disk/by-uuid`    | Просмотр символьных ссылок по UUID разделов                           | Позволяет найти устройства по UUID для использования в /etc/fstab                                                                                    |
| `wipefs /dev/sdX`            | Очистить сигнатуры файловых систем с диска                            | Используют для удаления старой информации о разделах перед созданием новых                                                                             |
| `mkfs.ext4 /dev/sdXN`        | Создание файловой системы ext4 на разделe                            | Форматирование раздела, пример: `mkfs.ext4 /dev/sda1`                                                                                                 |


### Введение в Блочные Устройства

![BPMN-схема бизнес-процесса](/8%20%20Хранение/Disk.png)

- Определение: Блочное устройство - это тип файла, представляющий интерфейс к физическому устройству хранения (например, HDD или SSD).
- Местоположение: Файлы блочных устройств находятся в каталоге /dev.
- Особенности Linux: В отличие от Windows, Linux позволяет файлам-устройствам подключаться к основному дереву каталогов, создавая единую файловую систему.
- Чтение и запись данных: Происходит блоками или порциями.
### Просмотр Блочных Устройств

![BPMN-схема бизнес-процесса](/8%20%20Хранение/Disk2.png)

- Использование команды ls block или ls -l /dev позволяет увидеть список блочных устройств в системе.
### Идентификация Устройств

![BPMN-схема бизнес-процесса](/8%20%20Хранение/Disk3.png)


- У каждого блочного устройства есть старшее (идентифицирует тип устройства) и младшее (идентифицирует физические или логические устройства) число.
### Виртуальная Файловая Система (VFS)

![BPMN-схема бизнес-процесса](/8%20%20Хранение/Disk4.png)

- Описание: VFS обеспечивает унифицированный интерфейс работы с файлами, скрывая детали реализации хранения.
- Функции: Предоставляет абстракцию для работы файловой системы пользователя с реальной файловой системой на устройстве хранения.
### Монтирование Разделов

![BPMN-схема бизнес-процесса](/8%20%20Хранение/Disk5.png)

- Монтирование: Процесс прикрепления файловой системы устройства к общей файловой системе. Указывает системе, где файловая система раздела "подключается" к общей иерархии каталогов.
### Разделы Диска
- Разделение диска: Позволяет сегментировать хранилище на разделы с разными целями использования.
- Mount Point: Точка монтирования, показывает место подключения раздела к файловой системе.
### Таблица Разделов
- Инструменты: lsblk, fdisk - команды для работы с таблицей разделов.
- Типы разделов: Первичные (для загрузки ОС) и Расширенные (содержат логические разделы).
### Схемы Разбиения на Разделы

![BPMN-схема бизнес-процесса](/8%20%20Хранение/Disk6.png)


- MBR (Master Boot Record): Имеет ограничения по количеству разделов и максимальному размеру диска.
- GPT (GUID Partition Table): Современная схема, преодолевает ограничения MBR, поддерживает больше разделов и дисков большего размера.
### Создание Разделов
- Использование команды gdisk для создания и изменения разделов на диске в формате GPT.

---