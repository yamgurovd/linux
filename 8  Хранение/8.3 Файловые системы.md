# 8.3 Файловые системы

---
Конспект

### Команды по конспекту "8.3 Файловые системы"

| Команда                        | Результат / Описание                                            | Пояснение и пример использования                                                                                                                   |
|--------------------------------|----------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------|
| `lsblk -f`                     | Просмотр информации о блочных устройствах с типами файловых систем | Показывает список подключенных дисков, их разделов, файловые системы и точки монтирования                                                          |
| `fdisk -l`                     | Просмотр таблицы разделов всех дисков                          | Выводит информацию о разделах, типах, размерах дисков, требует права root, пример: `sudo fdisk -l`                                                  |
| `mkfs.ext4 /dev/sdXN`          | Создание файловой системы Ext4 на разделе                       | Форматирует указанный раздел (пример: `mkfs.ext4 /dev/sda1`)                                                                                         |
| `mount /dev/sdXN /mnt`         | Монтирование раздела в каталог                                 | Монтирует раздел (например, `/dev/sda1`) в каталог `/mnt` для доступа к данным                                                                     |
| `umount /mnt`                  | Отмонтировать файловую систему                                 | Отсоединяет ранее примонтированный раздел из каталога `/mnt`                                                                                         |
| `stat /path/to/file`            | Отображение информации о файле, включая inode                  | Позволяет узнать атрибуты файла, например: `stat /mnt/myfile`                                                                                        |
| `ls -i /path/to/files`          | Отображение inode файлов в каталоге                            | Показывает номера inode файлов, например: `ls -i /mnt`                                                                                              |
| `df -i`                        | Просмотр использования inode на файловых системах              | Показывает количество использованных и свободных inode на каждом разделе                                                                            |
| `blkid /dev/sdXN`              | Просмотр UUID и типа файловой системы раздела                  | Выводит UUID и тип FS, например: `blkid /dev/sda1`                                                                                                |
| `cat /etc/fstab`               | Просмотр конфигурации автоматического монтирования разделов   | Файл с настройками точек монтирования, типов файловых систем и параметров монтирования                                                             |
| `uuidgen`                     | Генерация UUID для использования в /etc/fstab                 | Создает уникальный идентификатор, можно использовать для указания в fstab                                                                           |
| `mount -a`                    | Монтирование всех файловых систем, указанных в /etc/fstab      | Применяет все настройки монтирования из fstab без перезагрузки                                                                                      |

---

### Пример строки для /etc/fstab
```text
UUID=<UUID_раздела> /mnt ext4 defaults 0 2
```

Где:  
- `UUID=<UUID_раздела>` — уникальный идентификатор раздела (узнается с помощью команды `blkid`).  
- `/mnt` — точка монтирования.  
- `ext4` — тип файловой системы.  
- `defaults` — опции монтирования.  
- `0` — dump (резервное копирование, обычно 0).  
- `2` — pass number для проверки fsck (0 — не проверять, 1 — корневой раздел, 2 — остальные).



1. Вступление

![BPMN-схема бизнес-процесса](/8%20%20Хранение/FS.png)


- Необходимость файловой системы для использования дисков и разделов в ОС.
- Файловые системы определяют, как именно данные будем храниться на диске.
2. Создание и Монтирование Файловой Системы

![BPMN-схема бизнес-процесса](/8%20%20Хранение/FS2.png)



- Объяснение процесса создания файловой системы на диске или разделе.
- Монтирование файловой системы в каталог для доступа к данным.
3. Обзор Файловых Систем Linux


![BPMN-схема бизнес-процесса](/8%20%20Хранение/FS3.png)


- Краткий обзор семейства файловых систем Ext (Ext2, Ext3, Ext4).
- Упоминание NTFS, FAT, XFS и других поддерживаемых систем.
4. Подробный Разбор Ext4


![BPMN-схема бизнес-процесса](/8%20%20Хранение/FS4.png)


- Историческая справка: от Minix к Ext4.
- Основные улучшения и особенности Ext4, включая экстенты и контрольные суммы журнала.
5. Хранение Файлов в Файловой Системе


![BPMN-схема бизнес-процесса](/8%20%20Хранение/FS5.png)

- Описано, как файлы хранятся в виде блоков.
- Введение в индексные дескрипторы (inodes) и их роль в управлении файлами.
- Объяснение, как работает система именования файлов через каталоги и inodes.
6. Практическое Применение

![BPMN-схема бизнес-процесса](/8%20%20Хранение/FS6.png)



- Инструкции по созданию файловой системы Ext4 и монтированию её в систему.
- Использование команд stat, ls -i, df -i для работы с inode и проверкой файловой системы.
7. Монтаж Файловой Системы После Перезагрузки

![BPMN-схема бизнес-процесса](/8%20%20Хранение/FS6.png)


- Настройка автоматического монтирования при старте системы через файл /etc/fstab.
- Объяснение параметров строки монтирования: точка монтирования, тип файловой системы, опции монтирования, dump и pass number.

---