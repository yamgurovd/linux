# 6.8 SSH & SCP

---
## Конспект


### Популярные команды 

| Команда                            | Описание и пример использования                                                                                           |
|-----------------------------------|----------------------------------------------------------------------------------------------------------------------------|
| `ssh user@hostname`                | Подключение к удаленному серверу под пользователем `user`.<br>Пример: `ssh max@devstr01` — подключиться к серверу `devstr01` как пользователь `max`.|
| `ssh hostname`                    | Подключение к серверу `hostname` под текущим пользователем системы.<br>Пример: `ssh devstr01` — подключиться к `devstr01` без указания пользователя.   |
| `ssh-keygen`                     | Генерация пары SSH-ключей (публичного и приватного).<br>Пример: просто ввести `ssh-keygen` в терминале и следовать инструкциям.                          |
| `ssh-copy-id user@hostname`      | Копирование публичного ключа на сервер для беспарольной аутентификации.<br>Пример: `ssh-copy-id max@devstr01` — добавить ключ пользователя `max` на сервер.|
| `scp /path/to/local/file user@hostname:/remote/path` | Копирование файла с локальной машины на удаленный сервер.<br>Пример: `scp ~/file.txt max@devstr01:/home/max/` — скопировать файл `file.txt` на сервер.          |
| `scp user@hostname:/remote/path/file /local/path` | Копирование файла с удаленного сервера на локальную машину.<br>Пример: `scp max@devstr01:/home/max/file.txt ~/` — скопировать файл на локальный компьютер.           |
| `scp -r /local/directory user@hostname:/remote/path` | Рекурсивное копирование каталога на удаленный сервер.<br>Пример: `scp -r ~/mydir max@devstr01:/home/max/` — скопировать каталог `mydir` на сервер.               |
| `scp -p /path/to/file user@hostname:/remote/path` | Копирование файла с сохранением атрибутов (времени создания, прав).<br>Пример: `scp -p ~/script.sh max@devstr01:/home/max/` — копирование с сохранением атрибутов.    |
| `ssh -p port user@hostname`      | Подключение к удаленному серверу на нестандартном SSH-порту.<br>Пример: `ssh -p 2222 max@devstr01` — подключиться на порт `2222`.                            |


### 1. SSH (Secure Shell)

![BPMN-схема бизнес-процесса](/6%20%20Доступ%20и%20права/Ssh.png)


- Цель: Безопасный вход и выполнение команд на удаленном компьютере.
- Основы:
1. Синтаксис: ssh [пользователь@]hostname
2. Аутентификация через пользователя и пароль или SSH-ключи.
3. Порт по умолчанию: 22.
### 2. Пример использования SSH

![BPMN-схема бизнес-процесса](/6%20%20Доступ%20и%20права/Ssh2.png)
- Сценарий: Разработчик подключается к серверу.
-  Действия: Разработчик Max использует команду ssh devstr01 для подключения к серверу. Без указания пользователя, подключение осуществляется под текущим пользователем системы.
### 3. Беспарольная аутентификация через SSH-ключи

![BPMN-схема бизнес-процесса](/6%20%20Доступ%20и%20права/Ssh3.png)

- Генерация ключей: Использование команды ssh-keygen для создания пары ключей (публичный и закрытый).
- Копирование открытого ключа на сервер: Через команду ssh-copy-id пользователь@hostname.
- Публичный ключ: Позволяет подключаться без ввода пароля, размещается в файле .ssh/authorized_keys на сервере.
### 4. SCP (Secure Copy)

![BPMN-схема бизнес-процесса](/6%20%20Доступ%20и%20права/Ssh4.png)

- Цель: Безопасное копирование файлов и каталогов между локальной системой и удаленным сервером через SSH.
- Пример: scp путь_к_файлу пользователь@hostname:путь_назначения для копирования файла на сервер.
### 4.1 Особенности:
- Использование -r для копирования каталогов.
- Использование -p для сохранения исходных атрибутов файлов.

---