# 6.6 Разрешения файла

---
## Конспект

### Команды по управлению разрешениями и владельцами файлов и каталогов в Linux

| Команда                          | Описание и пример использования                                                                                       |
|---------------------------------|----------------------------------------------------------------------------------------------------------------------|
| `ls -l /root/nginx.sh`           | Просмотр подробных прав доступа и информации о файле `/root/nginx.sh`.                                              |
| `ls -l /home/d/ | grep tmp`      | Просмотр файлов из каталога `/home/d/`, фильтрация по имени `tmp`.                                                   |
| `chmod u+rwx tmp`                | Добавить владельцу (`u`) права чтения, записи и выполнения для файла/папки `tmp`.                                     |
| `chmod ugo+r-x tmp`              | Всем пользователям (u - владелец, g - группа, o - остальные) добавить права чтения и выполнения, убрать запись.       |
| `chmod o+rwx tmp`                | Для остальных пользователей добавить полный доступ (чтение, запись, выполнение) к файлу/папке `tmp`.                  |
| `chmod o+rwx,g+r-x,o-rwx tmp`    | Сложная комбинация изменения прав: у остальных разрешить rwx, у группы добавить r-x, затем у остальных убрать rwx.     |
| `chmod -R a+rwx /mydir`          | Рекурсивно дать всем полный доступ (`rwx`) ко всему содержимому каталога `/mydir`.                                  |
| `chmod 777 temp`                 | Полный доступ (rwx) владельцу, группе и остальным для файла/папки `temp`.                                           |
| `chmod 555 temp`                 | Дать права только на чтение и выполнение (r-x) всем пользователям (владелец, группа, остальные).                     |
| `chmod 660 temp`                 | Владелец и группа получают права чтения и записи (rw-), остальные — без прав.                                       |
| `chmod 750 temp`                 | Владелец — полный доступ rwx, группа — чтение и выполнение r-x, остальные — без прав.                               |
| `chown d:developer temp`         | Сменить владельца файла/папки `temp` на пользователя `d` и группу на `developer`.                                   |
| `chown d temp`                  | Сменить владельца файла/папки `temp` на пользователя `d`, без изменения группы.                                    |
| `chgrp devops temp`              | Изменить группу файла/папки `temp` на `devops`.                                                                    |
| `stat tmp`                     | Посмотреть расширенную информацию о файле `tmp` (включая права, владельца, дату изменения).                         |
| `getfacl tmp`                  | Просмотр расширенных прав доступа (ACL) файла `tmp`.                                                                |
| `setfacl -m u:andreyex:rwx tmp`| Добавить пользователю `andreyex` права чтения, записи и выполнения на файл `tmp` через ACL.                         |
| `grep ^d /etc/passwd`           | Вывести строки из `/etc/passwd`, начинающиеся с `d` (используется для фильтрации/проверки).                         |

---

### Исправления и уточнения твоих команд

| Команда                        | Описание и пример                                                                                            |
|-------------------------------|-------------------------------------------------------------------------------------------------------------|
| `chmod u+rwzx tmp`             | Ошибка: нет права `z`. Правильный вариант: `chmod u+rwx tmp`                                                |
| `chmod u+rwx tmp`              | Добавить владельцу права чтения, записи, выполнения (rwx) для файла/папки `tmp`.                              |
| `chmod ugo+r-x tmp`            | Добавить всем (u – владелец, g – группа, o – остальные) права чтения и выполнения, убрать права записи.      |
| `chmod o+rwx tmp`              | Добавить другим (others) права чтения, записи, выполнения.                                                  |
| `chmod o+rwx,g+r-x,o-rwx tmp`  | Противоречивая команда: добавляет и убирает права у остальных и группы, итог зависит от порядка.             |
| `chmod -R a+rwx /mydir`        | Рекурсивно дать полный доступ (rwx) всем в каталоге `/mydir`.                                              |
| `chmod 777 temp`               | Полный доступ всем (rwx) владельцу, группе и остальным.                                                    |
| `chmod 555 temp`               | Доступ только на чтение и выполнение для всех (r-x).                                                      |
| `chmod 660 temp`               | Владелец и группа: rw-, остальные – без прав (---).                                                       |
| `chmod 750 temp`               | Владелец: rwx, группа: r-x, остальные: ---                                                               |
| `chown d:developer temp`       | Сменить владельца на `d` и группу на `developer`.                                                        |
| `chown d temp`                | Сменить только владельца на `d`.                                                                          |
| `chgrp devops temp`            | Сменить группу на `devops`.                                                                                |


### Введение

![BPMN-схема бизнес-процесса](/6%20%20Доступ%20и%20права/File.png)

- Обсуждаем управление файлами и каталогами, в том числе настройку прав доступа в системе Linux.
- Разберем, как идентифицировать тип файла и его разрешения через команду ls -l.
### Типы Файлов и Разрешения

![BPMN-схема бизнес-процесса](/6%20%20Доступ%20и%20права/User4.png)

- Символ - показывает, что объект является обычным файлом.
- Символы awx указывают на разрешения (a - чтение, w - запись, x - выполнение, - - действие запрещено).
### Особенности Разрешений Каталогов
![BPMN-схема бизнес-процесса](/6%20%20Доступ%20и%20права/User5.png)

- Разрешения для каталогов: a - чтение списка файлов, w - управление содержимым, x - доступ к каталогу.
### Структура Разрешений

![BPMN-схема бизнес-процесса](/6%20%20Доступ%20и%20права/User5.png)

- Разрешения делятся на три группы: владелец (u), группа (g) и прочие (o).
- Разрешения задаются через сочетание символов awx или числа в восьмеричной системе.
### Изменение Разрешений

![BPMN-схема бизнес-процесса](/6%20%20Доступ%20и%20права/User6.png)

- Для изменения разрешений используется команда chmod.
- Разрешения могут быть заданы в символьном (например, a+x) или числовом (например, 755) формате.
### Примеры
![BPMN-схема бизнес-процесса](/6%20%20Доступ%20и%20права/User7.png)

- chmod 777 - полный доступ для всех.
- chmod 644 - чтение и запись для владельца, только чтение для группы и других.
### Изменение Владельца и Группы

![BPMN-схема бизнес-процесса](/6%20%20Доступ%20и%20права/User8.png)

- Команда chown меняет владельца и/или группу файла или каталога.
- Использование chown user:group для задания нового владельца и группы.

---