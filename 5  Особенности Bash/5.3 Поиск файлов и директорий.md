# 5.3 Поиск файлов и директорий

---

## Конспект

#### Команды, которые использовались

| Команда                          | Результат / Описание                                  | Пояснение                                                                      |
|----------------------------------|-------------------------------------------------------|--------------------------------------------------------------------------------|
| `locate test.txt`                | Поиск файла test.txt по базе данных                   | Быстрый поиск файлов по имени с использованием предварительно созданной базы   |
| `updatedb`                       | Обновление базы данных для locate                     | Пересоздает индекс файловой системы для команды locate (обычно требует sudo)   |
| `sudo updatedb`                  | Обновление базы с правами администратора              | Запуск updatedb с правами root для полного обновления базы locate              |
| `find -name test.txt`            | Поиск файла test.txt в текущей папке и поддиректориях | Рекурсивный поиск файла test.txt начиная из текущей директории                 |
| `grep A tmp/test.txt`            | Поиск строки с буквой A в файле tmp/test.txt          | Ищет строки, содержащие 'A' (учитывается регистр) в указанном файле            |
| `grep A /tmp/test.txt`           | Поиск буквы A в файле /tmp/test.txt                   | Аналогичный поиск в файле по абсолютному пути                                  |
| `grep A tmp/test.txt`            | Повторный поиск буквы A в tmp/test.txt                | Повтор команды grep по тому же файлу                                           |
| `grep a tmp/test.txt`            | Поиск буквы a с учетом регистра                       | Ищет строки, содержащие именно 'a' (зависит от регистра)                       |
| `grep 4 /tmp/test2.txt`          | Поиск символа '4' в /tmp/test2.txt                    | Ищет строки с цифрой 4                                                         |
| `grep 4 tmp/test2.txt`           | Поиск символа '4' в tmp/test2.txt                     | Ищет строки с цифрой 4 в другом файле                                          |
| `grep -i 4 tmp/test2.txt`        | Поиск '4' без учета регистра                          | Опция `-i` обычно применима для текста, для цифр не влияет                     |
| `grep -r 4 tmp/test2.txt`        | Рекурсивный поиск '4' начиная с tmp/test2.txt         | Опция рекурсивного поиска обычно для директорий, для файла применимо с ошибкой |
| `grep -v 4 tmp/test2.txt`        | Поиск строк, не содержащих '4'                        | Выводит все строки, где нет символа 4                                          |
| `grep -w sd test2.txt`           | Поиск слова 'sd' в test2.txt                          | Ищет только полное слово sd (отдельно стоящее)                                 |
| `grep -w sd tmp/test2.txt`       | Поиск слова 'sd' в tmp/test2.txt                      | Аналогично предыдущей команде, но в другом файле                               |
| `grep -vw sd tmp/test2.txt`      | Поиск строк, не содержащих слово 'sd'                 | Выводит строки, где слово sd отсутствует                                       |
| `grep -1 sd tmp/test2.txt`       | Вывод строк с 'sd' и одной строкой вокруг             | Показ результатов с контекстом (1 строка до и после слов со 'sd')              |
| `awk '{print $2}'`               | Вывод второго столбца из ввода                        | Команда awk для извлечения второго слова/столбца из каждой строки              |
| `awk '{print $2}' tmp/test2.txt` | Вывод второго столбца из файла tmp/test2.txt          | Аналогично, но из файла                                                        |
| `grep tmp/test2.txt              | awk '{print $2}'`                                     | Неправильный синтаксис (вероятно ошибка)                                       | Вероятно, хотели grep с файлом, но передано имя файла в grep, из-за чего ничего не работает |

### Общий обзор

В этом видео мы узнаем о различных методах поиска файлов и каталогов в Linux, а также о том, как анализировать
содержимое файлов. Рассмотрим команды locate, find, grep, и awk.

### Поиск файлов и каталогов

<details> <summary style=" 
          display: inline-block; 
          padding: 4px 12px; 
          background-color: #1976d2; 
          color: white; font-weight: bold; border-radius: 6px; 
          cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
          transition: background-color 0.3s; font-size: 14px; 
          margin: 0 auto; text-align: center;" 
          onmouseover="this.style.backgroundColor='#1565c0'" 
          onmouseout="this.style.backgroundColor='#1976d2'" > 
          Показать/скрыть картинку </summary> <div style="text-align: center; margin-top: 10px;"> 
          <img src="/5  Особенности Bash/Find.png" alt="Dbeaver" style="display: block; 
          margin: 0 auto; max-width: 90%; height: auto;"> </div> 
</details>

1. Команда locate

<details> <summary style=" 
          display: inline-block; 
          padding: 4px 12px; 
          background-color: #1976d2; 
          color: white; font-weight: bold; border-radius: 6px; 
          cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
          transition: background-color 0.3s; font-size: 14px; 
          margin: 0 auto; text-align: center;" 
          onmouseover="this.style.backgroundColor='#1565c0'" 
          onmouseout="this.style.backgroundColor='#1976d2'" > 
          Показать/скрыть картинку </summary> <div style="text-align: center; margin-top: 10px;"> 
          <img src="/5  Особенности Bash/Find2.png" alt="Dbeaver" style="display: block; 
          margin: 0 auto; max-width: 90%; height: auto;"> </div> 
</details>

- Используется для быстрого поиска файлов.
- Основана на базе данных mlocate.db.
- Для обновления базы данных используйте update db.

2. Команда find

- Позволяет искать файлы в определённом каталоге.
- Используйте парамент -name для поиска по имени файла.
- find предоставляет гибкие параметры для поиска.

### Анализ содержимого файлов

1. Команда grep

<details> <summary style=" 
          display: inline-block; 
          padding: 4px 12px; 
          background-color: #1976d2; 
          color: white; font-weight: bold; border-radius: 6px; 
          cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
          transition: background-color 0.3s; font-size: 14px; 
          margin: 0 auto; text-align: center;" 
          onmouseover="this.style.backgroundColor='#1565c0'" 
          onmouseout="this.style.backgroundColor='#1976d2'" > 
          Показать/скрыть картинку </summary> <div style="text-align: center; margin-top: 10px;"> 
          <img src="/5  Особенности Bash/Find3.png" alt="Dbeaver" style="display: block; 
          margin: 0 auto; max-width: 90%; height: auto;"> </div> 
</details>

- Используется для поиска строк в файле, которые соответствуют указанному шаблону.
- Для поиска без учёта регистра добавьте флаг -i.
- Рекурсивный поиск по каталогам возможен с ключом -r.
- Для инверсного поиска, не включающего строки с шаблоном, используйте -v.
- Чтобы искать целые слова, применяйте ключ -w.
- Для вывода строк до и после найденного шаблона используйте -A и -B.

2. Команда awk

<details> <summary style=" 
          display: inline-block; 
          padding: 4px 12px; 
          background-color: #1976d2; 
          color: white; font-weight: bold; border-radius: 6px; 
          cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
          transition: background-color 0.3s; font-size: 14px; 
          margin: 0 auto; text-align: center;" 
          onmouseover="this.style.backgroundColor='#1565c0'" 
          onmouseout="this.style.backgroundColor='#1976d2'" > 
          Показать/скрыть картинку </summary> <div style="text-align: center; margin-top: 10px;"> 
          <img src="/5  Особенности Bash/Find4.png" alt="Dbeaver" style="display: block; 
          margin: 0 auto; max-width: 90%; height: auto;"> </div> 
</details>

- Служит для анализа и обработки текстовых данных.
- Скриптовый язык с возможностью использования переменных, условных операторов и циклов.
- Синтаксис: awk '{command}' file.
- Разделитель полей по умолчанию – пробел, изменить можно с помощью -F.

### Практические примеры

- Использование grep для поиска слов в файле.
- Объединение grep с awk для выделения специфических данных.
- Изменение разделителя в awk для обработки специализированных текстовых форматов.

---