# 5.9 Cron


---
## Конспект

## Примеры использования и команды для работы с crontab

| Расписание / Команда            | Описание                                     | Запись / Команда                                      |
|--------------------------------|----------------------------------------------|------------------------------------------------------|
| Каждый день в 22:00             | Запуск скрипта каждый день в 22:00          | `0 22 * * * /home/d/tmp/test.sh >> test.txt`          |
| 19-го числа каждого месяца в 22:00 | Запуск 19-го числа каждого месяца            | `0 22 19 * * /home/d/tmp/test.sh >> test.txt`         |
| Каждые 15 минут                | Запуск каждые 15 минут                        | `*/15 * * * * /home/d/tmp/test.sh >> test.txt`        |
| Каждый понедельник в 3:30 утра | Запуск каждую неделю в понедельник           | `30 3 * * 1 /home/d/tmp/test.sh >> test.txt`          |
| Неверная запись из примера     | Неправильный формат, не будет работать       | `002219\*\*\*/home/d/tmp/test.sh >> test.txt`         |
| Просмотреть текущий crontab    | Выводить список всех задач текущего пользователя | `crontab -l`                                          |
| Редактировать crontab          | Открыть редактор для изменения заданий crontab | `crontab -e`                                          |
| Удалить все задания crontab    | Полностью очистить crontab текущего пользователя | `crontab -r`                                          |

---

**Пояснение к неверной записи:**

- Нет пробелов между полями времени — нарушен формат cron.
- Значения слиты в одно поле, без разделения минут, часов и т.д.
- Экранированные `\*` вместо простых `*`.
- Для корректной работы поля должны быть разделены пробелами и иметь допустимые значения.

Правильный пример для запуска скрипта каждый день в 22:19:





### Цель лекции: Научиться планировать задачи по расписанию в Linux с использованием службы Cron.

### Что такое Cron?
- Cron - это служба в Linux, позволяющая планировать выполнение задач в автоматическом режиме без участия пользователя.
- Задачи, называемые Cron jobs, выполняются в фоне согласно заданному расписанию.

### Практический пример
- Макс, разработчик, хочет автоматически тестировать свою программу для голосования, запуская скрипт каждые 5 минут с 7 вечера до 8 утра на протяжении трех дней. Результаты записываются в файл tmp.appstatus.txt.

### Как использовать Cron?
1. Запуск CronTab:
- Используйте команду crontab -i для редактирования заданий Cron от имени пользователя, под которым должна выполняться задача.
- Важно не использовать sudo, чтобы избежать планирования задач от имени root, если это не требуется.

<details> <summary style=" 
          display: inline-block; 
          padding: 4px 12px; 
          background-color: #1976d2; 
          color: white; font-weight: bold; border-radius: 6px; 
          cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
          transition: background-color 0.3s; font-size: 14px; 
          margin: 0 auto; text-align: center;" 
          onmouseover="this.style.backgroundColor='#1565c0'" 
          onmouseout="this.style.backgroundColor='#1976d2'" > 
          Показать/скрыть картинку </summary> <div style="text-align: center; margin-top: 10px;"> 
          <img src="/5  Особенности Bash/Cron.png" alt="Dbeaver" style="display: block; 
          margin: 0 auto; max-width: 90%; height: auto;"> </div> 
</details>


2. Настройка расписания:
- Расписание в CronTab определяется пятью полями: минуты, часы, дни месяца, месяцы и дни недели.
- Пример для запуска ежедневно в 19:20: 20 19 * * * команда
- Если требуется запускать задачу с определенным интервалом, например каждые 5 минут: */5 * * * * команда

<details> <summary style=" 
          display: inline-block; 
          padding: 4px 12px; 
          background-color: #1976d2; 
          color: white; font-weight: bold; border-radius: 6px; 
          cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
          transition: background-color 0.3s; font-size: 14px; 
          margin: 0 auto; text-align: center;" 
          onmouseover="this.style.backgroundColor='#1565c0'" 
          onmouseout="this.style.backgroundColor='#1976d2'" > 
          Показать/скрыть картинку </summary> <div style="text-align: center; margin-top: 10px;"> 
          <img src="/5  Особенности Bash/Cron2.png" alt="Dbeaver" style="display: block; 
          margin: 0 auto; max-width: 90%; height: auto;"> </div> 
</details>


3. Настройка задачи Макса:
- Задача должна выполняться каждые 5 минут с 7 вечера до 8 утра, 11, 12, и 13 числа каждого месяца.
- В поле часов ставим 0-7,19-23 для указания интересующего интервала времени.
- В поле дней месяца ставим 11,12,13 для запуска задачи в указанные даты.

<details> <summary style=" 
          display: inline-block; 
          padding: 4px 12px; 
          background-color: #1976d2; 
          color: white; font-weight: bold; border-radius: 6px; 
          cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
          transition: background-color 0.3s; font-size: 14px; 
          margin: 0 auto; text-align: center;" 
          onmouseover="this.style.backgroundColor='#1565c0'" 
          onmouseout="this.style.backgroundColor='#1976d2'" > 
          Показать/скрыть картинку </summary> <div style="text-align: center; margin-top: 10px;"> 
          <img src="/5  Особенности Bash/Cron3.png" alt="Dbeaver" style="display: block; 
          margin: 0 auto; max-width: 90%; height: auto;"> </div> 
</details>


4. Управление задачами Cron:
- Просмотр запланированных задач: crontab -l
- Проверка выполнения задачи: проверить нужный файл на наличие обновлений или использовать файл логов системы. 

<details> <summary style=" 
          display: inline-block; 
          padding: 4px 12px; 
          background-color: #1976d2; 
          color: white; font-weight: bold; border-radius: 6px; 
          cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
          transition: background-color 0.3s; font-size: 14px; 
          margin: 0 auto; text-align: center;" 
          onmouseover="this.style.backgroundColor='#1565c0'" 
          onmouseout="this.style.backgroundColor='#1976d2'" > 
          Показать/скрыть картинку </summary> <div style="text-align: center; margin-top: 10px;"> 
          <img src="/5  Особенности Bash/Cron4.png" alt="Dbeaver" style="display: block; 
          margin: 0 auto; max-width: 90%; height: auto;"> </div> 
</details>



### Инструменты и ресурсы
- CronTab Guru: Онлайн инструмент для визуальной настройки и тестирования расписания Cron.
- Специальные обозначения в Cron: Символ собачки @ для обозначения регулярных интервалов (например, @daily для


---