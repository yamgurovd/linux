# 5  Особенности Bash

## Содержание блока

---

- [5.2 Архивы](/5%20%20Особенности%20Bash/5.2%20Архивы.md)
- [5.3 Поиск файлов и директорий](/5%20%20Особенности%20Bash/5.3%20Поиск%20файлов%20и%20директорий.md)
- [5.4 Перенаправление](/5%20%20Особенности%20Bash/5.4%20Перенаправление.md)
- [5.5 Логические операторы](/5%20%20Особенности%20Bash/5.5%20Логические%20операторы.md)
- [5.7 Текстовые редакторы](/5%20%20Особенности%20Bash/5.7%20Текстовые%20редакторы.md)
- [5.9 Cron](/5%20%20Особенности%20Bash/5.9%20Cronю.md)
- [5.11 Упражнение - Особенности Bash](/5%20%20Особенности%20Bash/5.11%20Упражнение%20-%20Особенности%20Bash.md)

---

## Используемые команды всего блока

| Команда                                                    | Результат / Описание                                    | Пояснение                                                                                           |
|-----------------------------------------------------------|--------------------------------------------------------|----------------------------------------------------------------------------------------------------|
| `du -sk`                                                  | Размер текущей директории в Кб                          | Суммарный размер файлов в текущей директории                                                      |
| `du -sk tmp`                                              | Размер папки tmp в Кб                                  | Аналогично, для папки tmp                                                                          |
| `du -sh tmp`                                              | Размер папки tmp в удобочитаемом формате               | Вывод с удобными единицами (Кб, Мб и т.п.)                                                        |
| `ls -l`                                                   | Список с подробной информацией                           | Права, владелец, размер, дата изменения файлов и папок                                            |
| `ls -lh`                                                  | Список с удобочитаемым размером                         | Размер файлов с единицами (Кб, Мб и т.п.)                                                         |
| `ls -lh tmp`                                              | Детальный список для папки tmp                           | Аналогично для конкретной папки                                                                    |
| `clear`                                                   | Очистка терминала                                       | Очищает экран                                                                                      |
| `tar -cvf /home/d/temp/archive.tar /home/d/temp/`         | Создание архива tar каталога                             | Архивирует все файлы и папки из каталога /home/d/temp                                            |
| `gzip /home/d/temp/archive.tar`                           | Сжатие архива gzip                                     | Сжимает файл архива                                                                                |
| `gzip -d /home/d/temp/horse.dat.gz`                       | Разжатие gzip файла                                     | Восстанавливает оригинальный файл                                                                |
| `mv /home/d/temp/horse.dat /home/d/documents/`            | Перемещение файла                                      | Перемещает файл в другую папку                                                                    |
| `sudo find /home/d/ -name elephant.key -exec cp {} /home/d/caveof70s/ \;` | Поиск с копированием с sudo                             | Находит файл и копирует в другой каталог                                                          |
| `find /home/d/temp/ -type f -name "*scroll" 2>/dev/null \| xargs grep -l "medicine"` | Поиск файлов с окончанием и содержанием                 | Ищет файлы с названием, оканчивающимся на "scroll", содержащие "medicine"                         |
| `find /home/d/temp/ -type d -name animals 2>/dev/null`    | Поиск директорий animals                                | Поиск директорий с указанным именем                                                               |
| `find /home/d/temp/ -type f -mmin -120 2>/dev/null`       | Поиск изменённых файлов за 120 минут                     | Ищет файлы, изменённые менее 2 часов назад                                                        |
| `grep -rl "172\.20\.20\.20" /etc > /home/d/temp/found_ip_files.txt` | Поиск файлов с IP и сохранение списка                   | Находит файлы в /etc с IP и сохраняет результат в файл                                            |
| `find /home/d/temp/ -type f -size -5k 2>/dev/null`        | Поиск файлов меньше 5 Кб                                | Ищет маленькие файлы                                                                              |
| `command 2> /home/d/temp/errors.log`                      | Перенаправление ошибок в файл                           | Лог ошибок в отдельный файл                                                                       |
| `bzip2 -k /home/d/temp/test.txt`                          | Сжатие bzip2 с сохранением исходника                    | Создаёт `.bz2` копию, не удаляя исходный файл                                                    |
| `cat /home/d/temp/file1.txt >> /home/d/temp/file2.txt`    | Добавление содержимого файла                             | Добавляет содержимое `file1.txt` в конец `file2.txt`                                             |
| `gzip /home/d/temp/file2.txt`                             | Сжатие gzip файла                                      | Создаёт файл `.gz`                                                                                |
| `gunzip /home/d/temp/file2.txt.gz`                        | Разжатие gzip                                           | Восстанавливает файл                                                                              |
| `xz /home/d/temp/file2.txt`                               | Сжатие xz                                              | Создаёт `.xz` файл                                                                                |
| `unxz /home/d/temp/file2.txt.xz`                          | Разжатие xz                                            | Восстанавливает файл                                                                              |
| `wc -l /home/d/temp/test.txt`                             | Подсчёт строк                                          | Количество строк в файле                                                                          |
| `grep "pattern" /home/d/temp/test.txt`                    | Поиск строки по паттерну                                | Поиск текста в файле                                                                             |
| `zcat /home/d/temp/test.txt.gz | tee /home/d/temp/output.txt`  | Одновременный вывод сжатого файла на экран и в файл    | Позволяет одновременно прочитать и сохранить содержимое сжатого файла                            |
| `locate test.txt`                                         | Быстрый поиск по базе locate                            | Быстрый поиск по имени файла                                                                      |
| `updatedb`                                                | Обновление базы locate                                 | Пересоздаёт индекс файловой системы (обычно с sudo)                                             |
| `sudo updatedb`                                           | Обновление базы с root                                  | Для полного обновления                                                                           |
| `find -name test.txt`                                     | Поиск файла в текущей папке                             | Поиск с рекурсией                                                                                |
| `grep A /tmp/test.txt`                                    | Поиск строки с буквой А                                 | Найти строки с 'A' в файле                                                                       |
| `grep -v 4 tmp/test2.txt`                                | Поиск строк, не содержащих '4'                          | Исключает строки с '4'                                                                             |
| `grep -w sd test2.txt`                                    | Поиск слова sd                                         | Полное совпадение слова                                                                           |
| `grep -1 sd tmp/test2.txt`                               | Подсветка вокруг слова                                  | Показывает контекст (1 строка вокруг найденных)                                                  |
| `awk '{print $2}' tmp/test2.txt`                         | Вывод второго столбца текста                           | Извлечение поля из строк файла                                                                   |
| `cat > test.txt`                                         | Создание и запись из stdin                            | Ввод с клавиатуры в файл                                                                          |
| `echo $SHELL > test.txt`                                 | Записать значение переменной SHELL                     | Создаёт или перезаписывает файл                                                                  |
| `echo "My shell is Bash" >> test.txt`                    | Добавить строку в файл                                  | Добавление без перезаписи                                                                         |
| `cat nofile 2> errors.txt`                               | Перенаправить ошибки в файл                             | Записать ошибку отсутствующего файла                                                              |
| `cat nofile 2>> test.txt`                                | Добавить ошибку в конец файла                           | Добавление в файл с ошибкой                                                                      |
| `ls test.txt nofile 2>> errors.txt`                      | Перенаправление ошибок при выводе файлов               | Ошибка отсутствующего файла сохраняется в файл                                                  |
| `cat nofile 2> /dev/null`                               | Подавление ошибок                                      | Ошибки игнорируются                                                                             |
| `ls -lh > name.txt`                                      | Сохранить вывод ls в файл                              | Переадресация вывода                                                                            |
| `ls -lh name.txt`                                        | Просмотр информации о name.txt                          | Проверка файла                                                                                  |
| `grep No test.txt > test2.txt`                           | Поиск и запись результата                               | Результаты записи в файл                                                                        |
| `less test2.txt`                                         | Просмотр файла                                         | Листание текста                                                                               |
| `less test.txt`                                         | Просмотр файла                                         | Просмотр содержимого                                                                            |
| `echo $SHELL | tee test.txt`                            | Одновременный вывод и запись                            | tee записывает и выводит                                                                       |
| `echo "My chell is Bash" | tee -a test.txt`             | Добавить и вывести строку                                | Добавление в файл с выводом                                                                     |
| `ls -l noOK name.txt 1> name.txt 2>&1`                   | Перенаправление оба вывода в файл                      | Сохраняет stdout и stderr в один файл                                                           |
| `ls -l notOk name.txt 2>&1 | grep name`                  | Фильтрация вывода по "name"                            | Вывод только строк, содержащих "name"                                                          |
| `ls -l notOk name.txt 2>&1 | grep notOk`                 | Фильтрация вывода по "notOk"                           | Вывод строк с ошибками                                                                          |
| `ls test.txt && echo "Ok"`                               | Логическое И: если ls успешен, вывести "Ok"            | Вторая команда выполняется только если первая успешна                                           |
| `ls nofile || echo "Something bad"`                      | Логическое ИЛИ: при ошибке ls вывести сообщение         | Вторая команда выполняется при неудаче первой                                                    |
| `ls test.txt; echo "Ok"`                                | Последовательное выполнение без проверки результата    | Всегда выводит "Ok" после команды                                                              |


---