# 5.4 Перенаправление

---
## Конспект

#### Команды, которые использовались

| Команда                              | Результат / Описание                            | Пояснение                                                                                     |
|-------------------------------------|------------------------------------------------|-----------------------------------------------------------------------------------------------|
| `cat > test.txt`                    | Ждёт ввода с клавиатуры и сохраняет в test.txt | Перенаправление стандартного ввода в файл (создаёт или перезаписывает файл)                   |
| `echo $SHELL > test.txt`            | Записывает в test.txt значение переменной SHELL | Записывает путь текущей оболочки в файл, перезаписывая его                                   |
| `cat test.txt`                      | Выводит содержимое test.txt                      | Показывает текущие данные в файле test.txt                                                   |
| `echo "My shell is Bach" >> test.txt` | Добавляет строку в конец test.txt               | Добавление текста, не перезаписывая файл (оператор `>>`)                                     |
| `echo $SHELL 1> test.txt`           | Записывает значение SHELL в test.txt            | `1>` — явное перенаправление стандартного вывода (то же, что `>`), перезаписывает файл       |
| `cat nofile 2> errors.txt`          | Перенаправляет ошибку в errors.txt               | Файл nofile отсутствует, ошибка записи попадёт в errors.txt                                  |
| `cat errors.txt`                    | Показывает содержимое errors.txt                  | Отображение записанной ошибки                                                                |
| `cat nofile 2>> test.txt`           | Добавляет ошибку в конец test.txt                  | Ошибка отсутствия файла добавляется в test.txt в конец файла                                 |
| `cat test.txt`                      | Показывает обновлённое содержимое test.txt         | Содержит тексты и добавленную ошибку                                                         |
| `ls test.txt nofile 2>> errors.txt` | Перенаправляет ошибки отсутствующего файла в errors.txt | Пытается вывести два файла, отсутствующий генерирует ошибку, которая добавляется в errors.txt |
| `cat nofile 2> /dev/null`           | Подавляет сообщение об ошибке                      | Ошибка проигнорирована путём перенаправления в "пустоту"                                    |
| `ls -lh > name.txt`                 | Сохраняет вывод подробного списка файлов в name.txt | Перенаправление стандартного вывода в файл                                                  |
| `ls -lh name.txt`                   | Показывает подробную информацию о name.txt         | Проверка создания файла и его свойств                                                       |
| `tal -n 100 log.txt > log.txt`      | Перезаписывает log.txt, возможно ошибка команды  | Ошибка в команде `tal`, вероятно опечатка (вместо `tail`)                                  |
| `grep No test.txt > test2.txt`      | Записывает строки с "No" из test.txt в test2.txt  | Фильтрация текста и сохранение результата                                                   |
| `less test2.txt`                   | Просмотр содержимого test2.txt                      | Открывает файл для постраничного просмотра                                                  |
| `grep No test.txt | less`           | Просмотр результата grep через less                 | Пайп выводит отфильтрованные строки для просмотра через less                                |
| `less test.txt`                    | Просмотр содержимого test.txt                        | Просмотр файла с помощью программы less                                                    |
| `echo $SHELL | tee test.txt`        | Записывает значение SHELL в test.txt и выводит в консоль | Вывод и сохранение одновременно (tee перезаписывает файл)                                  |
| `cat test.txt`                    | Проверка содержимого test.txt                        | Проверяет результат команды tee                                                            |
| `echo "My chell is Bash" | tee -a test.txt` | Добавляет строку в test.txt и выводит её                  | tee с опцией `-a` добавляет в файл, не перезаписывая                                      |
| `ls -l noOK name.txt 1> name.txt 2>&1` | Перенаправляет stdout и stderr в name.txt               | Ошибка "noOK" и вывод `name.txt` сохраняются в одном файле                                 |
| `ls -l notOk name.txt 2>&1 | grep name` | Вывод ошибок и stdout передаются grep для фильтрации         | Отображает строки, содержащие "name" в выводе команды                                      |
| `ls -l notOk name.txt 2>&1 | grep notOk` | Вывод ошибок и stdout передаются grep для фильтрации         | Отображает строки, содержащие "notOk" в выводе команды                                    |



### Вступление
- Определение ввода-вывода.
- В Linux ввод-вывод рассматривается через понятие файлов и потоков данных.

<details> <summary style=" 
          display: inline-block; 
          padding: 4px 12px; 
          background-color: #1976d2; 
          color: white; font-weight: bold; border-radius: 6px; 
          cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
          transition: background-color 0.3s; font-size: 14px; 
          margin: 0 auto; text-align: center;" 
          onmouseover="this.style.backgroundColor='#1565c0'" 
          onmouseout="this.style.backgroundColor='#1976d2'" > 
          Показать/скрыть картинку </summary> <div style="text-align: center; margin-top: 10px;"> 
          <img src="/5  Особенности Bash/Cat.png" alt="Dbeaver" style="display: block; 
          margin: 0 auto; max-width: 90%; height: auto;"> </div> 
</details>


### Стандартные потоки

<details> <summary style=" 
          display: inline-block; 
          padding: 4px 12px; 
          background-color: #1976d2; 
          color: white; font-weight: bold; border-radius: 6px; 
          cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
          transition: background-color 0.3s; font-size: 14px; 
          margin: 0 auto; text-align: center;" 
          onmouseover="this.style.backgroundColor='#1565c0'" 
          onmouseout="this.style.backgroundColor='#1976d2'" > 
          Показать/скрыть картинку </summary> <div style="text-align: center; margin-top: 10px;"> 
          <img src="/5  Особенности Bash/Cat2.png" alt="Dbeaver" style="display: block; 
          margin: 0 auto; max-width: 90%; height: auto;"> </div> 
</details>

- stdin (0): стандартный поток ввода.
- stdout (1): стандартный поток вывода.
- stderr (2): стандартный поток ошибок.
- Нумерация потоков помогает системе их различать.
### Перенаправление вывода в файл
<details> <summary style=" 
          display: inline-block; 
          padding: 4px 12px; 
          background-color: #1976d2; 
          color: white; font-weight: bold; border-radius: 6px; 
          cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
          transition: background-color 0.3s; font-size: 14px; 
          margin: 0 auto; text-align: center;" 
          onmouseover="this.style.backgroundColor='#1565c0'" 
          onmouseout="this.style.backgroundColor='#1976d2'" > 
          Показать/скрыть картинку </summary> <div style="text-align: center; margin-top: 10px;"> 
          <img src="/5  Особенности Bash/Cat3.png" alt="Dbeaver" style="display: block; 
          margin: 0 auto; max-width: 90%; height: auto;"> </div> 
</details>

- Использование символа > для перезаписи файла стандартным выводом команды.
- Использование >> для добавления к содержимому файла.
- Указание номера потока перед символом перенаправления для работы с конкретным потоком (например, 2> для stderr).
### Работа с файлами и командами

<details> <summary style=" 
          display: inline-block; 
          padding: 4px 12px; 
          background-color: #1976d2; 
          color: white; font-weight: bold; border-radius: 6px; 
          cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
          transition: background-color 0.3s; font-size: 14px; 
          margin: 0 auto; text-align: center;" 
          onmouseover="this.style.backgroundColor='#1565c0'" 
          onmouseout="this.style.backgroundColor='#1976d2'" > 
          Показать/скрыть картинку </summary> <div style="text-align: center; margin-top: 10px;"> 
          <img src="/5  Особенности Bash/Cat4.png" alt="Dbeaver" style="display: block; 
          margin: 0 auto; max-width: 90%; height: auto;"> </div> 
</details>

- Обнуление файла перед записью вывода команды.
- Способы ограничения содержимого файла.
- Создание "черной дыры" для данных через /dev/null для игнорирования нежелательных данных.
### Использование пайпов (каналов)

<details> <summary style=" 
          display: inline-block; 
          padding: 4px 12px; 
          background-color: #1976d2; 
          color: white; font-weight: bold; border-radius: 6px; 
          cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
          transition: background-color 0.3s; font-size: 14px; 
          margin: 0 auto; text-align: center;" 
          onmouseover="this.style.backgroundColor='#1565c0'" 
          onmouseout="this.style.backgroundColor='#1976d2'" > 
          Показать/скрыть картинку </summary> <div style="text-align: center; margin-top: 10px;"> 
          <img src="/5  Особенности Bash/Cat5.png" alt="Dbeaver" style="display: block; 
          margin: 0 auto; max-width: 90%; height: auto;"> </div> 
</details>

- Передача стандартного вывода одной команды в стандартный ввод другой команды через символ |.
- Примеры использования пайпов для фильтрации содержимого файла.
### Команда tee

<details> <summary style=" 
          display: inline-block; 
          padding: 4px 12px; 
          background-color: #1976d2; 
          color: white; font-weight: bold; border-radius: 6px; 
          cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
          transition: background-color 0.3s; font-size: 14px; 
          margin: 0 auto; text-align: center;" 
          onmouseover="this.style.backgroundColor='#1565c0'" 
          onmouseout="this.style.backgroundColor='#1976d2'" > 
          Показать/скрыть картинку </summary> <div style="text-align: center; margin-top: 10px;"> 
          <img src="/5  Особенности Bash/Cat6.png" alt="Dbeaver" style="display: block; 
          margin: 0 auto; max-width: 90%; height: auto;"> </div> 
</details>

- Использование команды tee для одновременного вывода данных на экран и в файл.
- Опции -a для добавления данных вместо перезаписи.
### Перенаправление нескольких потоков

<details> <summary style=" 
          display: inline-block; 
          padding: 4px 12px; 
          background-color: #1976d2; 
          color: white; font-weight: bold; border-radius: 6px; 
          cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
          transition: background-color 0.3s; font-size: 14px; 
          margin: 0 auto; text-align: center;" 
          onmouseover="this.style.backgroundColor='#1565c0'" 
          onmouseout="this.style.backgroundColor='#1976d2'" > 
          Показать/скрыть картинку </summary> <div style="text-align: center; margin-top: 10px;"> 
          <img src="/5  Особенности Bash/Cat7.png" alt="Dbeaver" style="display: block; 
          margin: 0 auto; max-width: 90%; height: auto;"> </div> 
</details>

- Совместное перенаправление stdout и stderr в один файл.
- Использование указателей (&) для перенаправления одного потока в другой.
- Динамика перенаправления при использовании пайпов и указателей.

--- 