# 3 Структура Linux

## Содержание блока

---

- [3.1 Введение](/3%20%20Структура%20Linux/3.1%20Введение.md)
- [3.2 Про ядро Linux](/3%20%20Структура%20Linux/3.2%20Про%20ядро%20Linux.md)
- [3.3 POSIX](/3%20%20Структура%20Linux/3.3%20POSIX.md)
- [3.4 Работа с железом](/3%20%20Структура%20Linux/3.4%20Работа%20с%20железом.md)
- [3.6 Порядок Загрузки в Linux](/3%20%20Структура%20Linux/3.6%20Порядок%20Загрузки%20в%20Linux.md)
- [3.7 Runlevels](/3%20%20Структура%20Linux/3.7%20Runlevels.md)
- [3.8 Типы Файлов](/3%20%20Структура%20Linux/3.8%20Типы%20Файлов.md)
- [3.9 Ссылки](/3%20%20Структура%20Linux/3.9%20Ссылки.md)
- [3.11 Упражнение - Структура Linux](/3%20%20Структура%20Linux/3.11%20Упражнение%20-%20Структура%20Linux.md)

---

## Используемые команды всего блока

| Команда                                        | Результат / Описание                                                                            | Пояснение                                                                                                                              |
|------------------------------------------------|-------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| `uname`                                        | Показывает имя операционной системы.                                                            | Базовая команда для вывода информации о системе.                                                                                       |
| `uname -r`                                     | Отображает версию ядра Linux.                                                                   | Полезно для диагностики и определения версии ядра, на котором работает система.                                                         |
| `echo /etc/*rel*`                              | Показывает файлы в каталоге `/etc`, имя которых содержит "rel".                                  | Используется для быстрого поиска файлов с информацией о релизе ОС.                                                                     |
| `echo /etc/os-release/*rel*`                   | Попытка вывести файлы внутри `/etc/os-release`, содержащие "rel" в имени.                       | Пример использования шаблонов, показывает, что в данном подкаталоге таких файлов нет.                                                  |
| `dmesg`                                        | Показывает сообщения ядра Linux.                                                                | Используется для диагностики оборудования и системных ошибок, выводит буфер сообщений ядра.                                             |
| `clear`                                        | Очищает экран терминала.                                                                        | Используется для улучшения читаемости вывода команд и наведения порядка в терминале.                                                    |
| `udevadm`                                      | Управляет устройствами и правилами udev.                                                        | Утилита для взаимодействия с подсистемой `udev`, которая управляет устройствами Linux.                                                 |
| `udevadm info`                                 | Показывает информацию об устройстве.                                                            | Позволяет узнать подробности о конкретном устройстве, например, атрибуты, путь к устройству.                                            |
| `udevadm monitor`                              | Отслеживает события устройств в реальном времени.                                               | Полезно для мониторинга подключения/отключения оборудования и отладки правил `udev`.                                                   |
| `lspci`                                        | Показывает список всех PCI-устройств.                                                           | Используется для диагностики и инвентаризации аппаратных компонентов, подключенных через шину PCI.                                     |
| `lscpu`                                        | Показывает подробную информацию о процессоре.                                                  | Включает архитектуру, количество ядер, модель процессора, кэш и другие характеристики.                                                 |
| `free`                                         | Показывает информацию об использовании оперативной памяти.                                     | Помогает оценить доступную и используемую память, а также память свопа.                                                                |
| `lsmem`                                        | Показывает информацию о блоках памяти.                                                          | Детализированная информация о конфигурации памяти, включая диапазоны адресов и физическое расположение.                              |
| `lshw`                                         | Выводит детальное аппаратное описание системы.                                                  | Полный отчет о железе, включая процессор, память, контроллеры, устройства ввода/вывода, сетевые карты и другое.                        |
| `history`                                      | Показывает историю введённых в терминале команд.                                                | Позволяет просмотреть и повторить ранее выполненные команды, очень полезно для отладки и автоматизации.                               |
| `ls -l /sbin/init`                             | Показывает, что `/sbin/init` является символической ссылкой на `../lib/systemd/systemd`.        | Позволяет узнать, что в системе инициализация осуществляется через `systemd`, а не классический `init`.                               |
| `sudo -l /sbin/init`                           | Показывает, можно ли запускать `/sbin/init` с помощью sudo.                                     | Определяет, разрешено ли пользователю выполнять `/sbin/init` с правами суперпользователя согласно конфигурации `sudoers`.             |
| `sudo ls -l /sbin/init`                        | Выводит подробный список с правами на файл `/sbin/init` от имени суперпользователя.             | Позволяет увидеть разрешения, владельца и размер файла `/sbin/init` даже если у текущего пользователя нет прав.                      |
| `runlevel`                                     | Показывает текущий и предыдущий уровень запуска (runlevel).                                     | Полезно для систем, использующих SysVinit, или для понимания эквивалентов в systemd. `N` означает отсутствие предыдущего.              |
| `systemctl get-default`                        | Отображает текущий целевой уровень загрузки `systemd` по умолчанию.                             | Позволяет узнать, в какой режим система загрузится после перезагрузки (например, `graphical.target` или `multi-user.target`).        |
| `ls -ltr /etc/systemd/system.default.target`   | Проверяет наличие и показывает информацию о ссылке `default.target` в `systemd`.                 | Если файл или ссылка отсутствует, указывает на то, что `default.target` может быть настроен другим способом или путь неверен.         |
| `sudo su`                                      | Запрос пароля и переход в пользователя `root`.                                                  | Позволяет получить права суперпользователя для выполнения административных команд в текущей сессии.                                   |
| `systemctl set-default multi-user.target`      | Устанавливает уровень загрузки по умолчанию в текстовый режим (`multi-user.target`).             | Создает символическую ссылку, которая указывает `systemd`, что при следующей загрузке система должна стартовать без графического интерфейса. |
| `systemctl isolate multi-user.target`          | Немедленно переключает систему в текстовый многопользовательский режим (runlevel 3).            | Позволяет временно переключиться в режим без графического интерфейса без перезагрузки системы.                                         |
| `systemctl isolate graphical.target`           | Немедленно переключает систему в графический режим (runlevel 5).                                | Позволяет временно переключиться в графический режим без перезагрузки системы.                                                         |
| `systemctl set-default graphical.target`       | Устанавливает режим загрузки по умолчанию в графический режим (`graphical.target`).              | При следующей загрузке система стартует в графическом режиме.                                                                          |
| `telinit 3`                                    | Переключает runlevel на 3 (текстовый режим, устаревшая команда).                                | Используется в старых системах с `init`; в `systemd` предпочтительнее `systemctl isolate`.                                             |
| `telinit 5`                                    | Переключает runlevel на 5 (графический режим, устаревшая команда).                              | Используется в старых системах с `init`; в `systemd` предпочтительнее `systemctl isolate`.                                             |
| `file /path/to/file_or_dir`                    | Определяет тип файла или директории.                                                            | Команда `file` используется для определения типа данных, содержащихся в файле, что полезно для работы с неизвестными файлами.         |
| `ls -ld /path/to/dir`                          | Выводит подробную информацию о самой директории.                                                 | Опция `-l` (`--long`) показывает длинный формат списка, а `-d` (`--directory`) — информацию о самой директории, а не её содержимом. |
| `cd /path/to/dir`                              | Переход в указанную директорию.                                                                 | Команда `cd` (change directory) используется для навигации по файловой системе.                                                        |
| `ls -l`                                        | Выводит подробный список содержимого текущей директории.                                        | Опция `-l` (`--long`) отображает информацию о правах доступа, количестве жестких ссылок, владельце, группе, размере, дате модификации и имени файла. |
| `ls -li`                                       | Выводит подробный список содержимого текущей директории с inode-номерами.                       | Опция `-i` (`--inode`) добавляет в вывод inode-номер каждого файла или директории. Помогает увидеть, что жесткие ссылки имеют одинаковый inode, а символические - нет. |
| `ln source.txt link.txt`                       | Создает жесткую ссылку `link.txt` на файл `source.txt`.                                         | Жесткая ссылка - это еще одно имя для существующего файла. Она указывает на тот же inode, что и исходный файл, находясь в той же файловой системе. |
| `ln -s source.txt symlink.txt`                 | Создает символическую (мягкую) ссылку `symlink.txt` на файл `source.txt`.                      | Символическая ссылка - это файл, который содержит путь к другому файлу или директории. Она не указывает на тот же inode, что и исходный файл, и может ссылаться на файлы в других файловых системах. |
| `lsblk`                                        | Выводит информацию о блоковых устройствах (дисках и разделах).                                  | Отлично подходит для просмотра структуры жестких дисков, разделов и подключенных устройств хранения в древовидном формате.          |
| `bash hosts.sh`                                | Запускает скрипт `hosts.sh` в среде bash.                                                       | Выполняет shell-скрипт, что часто используется для автоматизации настроек, установки пакетов или выполнения рутинных задач.          |

---